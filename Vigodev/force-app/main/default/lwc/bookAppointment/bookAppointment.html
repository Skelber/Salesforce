<!-- LLP-2052 -->

<template>
    <div class="slds-scope container">
        <!-- <lightning-card>        -->
            <template if:true={appointmentHasError}>
                <template if:true={appointmentHasPassed}>
                    <div class="slds-align_absolute-center slds-m-top_large" style="height: 60vh;">
                        <p>{label.AppointmentHasPassed}</p>
                    </div>
                </template>
                <template if:true={appointmentHasError}>
                    <template if:false={appointmentHasPassed}>
                        <div class="slds-align_absolute-center slds-grid slds-grid_vertical slds-m-top_large" style="height: 60vh;">
                            <p>{label.AppointmentNotfound}</p>
                            <img class="largeIcon" src={notFoundIcon} alt="Not found image">
                        </div>
                    </template>
                </template>
            </template>
            <template if:false={appointmentHasError}>

                <template if:false={notBookedViaWebsite}>
                        <c-appointment-progress
                        show-default-progress={showDefaultProgress}
                        currentstep={currentStep}>
                    </c-appointment-progress>
            </template>
            <template if:true={showScreenOne}>
                <c-select-patient 
                onpatientdetails={receiveContact}
                onscreenonecompleted={validateScreenOne}>
            </c-select-patient>
        </template>
        
        <template if:true={showScreenTwo}>
            <c-select-worktype
            business-unit-id={selectedBusinessUnitId}
            product-group-id={selectedProductGroupId}
            product-sub-group-id={selectedProductSubGroupId}
            appointment-type-id={selectedAppointmentTypeId}
            onworktypedetails={receiveWorktypeDetails}></c-select-worktype>
        </template>
        <template if:true={showScreenThree}>
            <c-select-location
            worktype={receivedWorktype}
            selected-location={receivedLocation}
            onlocationdetails={receiveLocation}></c-select-location>
        </template>
        <template if:true={showScreenFour}>
            <c-select-service-resource
            contact={receivedContact}
            worktype={receivedWorktype}
            location={receivedLocation}
            selected-slot={receivedSlot}
            onslotdetails={receiveSlotDetails}
            service-resource-id={serviceResourceId}
            ></c-select-service-resource>  
        </template>
        <template if:true={showScreenFive}>
            <c-additional-info
            additional-info={receivedAdditionalInfo}
            onadditionalinfodetails={receiveAdditionalInfo}></c-additional-info>
        </template>
        <template if:true={showScreenSix}>
            <template if:true={notBookedViaWebsite}>
                <template if:true={showChangeButton}>
                    <div class="slds-align_absolute-center editMessage">
                        <p>{label.ChangeNotConfirmed}</p>
                    </div>
                </template>
            </template>
            <c-patient-overview 
            onscreenchange={receiveScreenChange} 
            contact={receivedContact}
            worktype={receivedWorktype}
            location={receivedLocation}
            timeslot={receivedSlot}
            additionalinfo={receivedAdditionalInfo}
            not-booked-via-website={notBookedViaWebsite}
            attachments-uploaded={attachmentsUploaded}>
        </c-patient-overview>
    </template>
    
    
    <footer>
        <div class="slds-grid slds-grid_align-end">
            <template if:false={showScreenOne}>
                <template if:false={notBookedViaWebsite}>
                    <lightning-button label={label.Previous} onclick={handlePrevious} disabled={disableButtons} class="slds-m-right_small"></lightning-button>
                </template>
            </template>
            <template if:false={showScreenSix}>
                <template if:false={notBookedViaWebsite}>
                    <template if:true={showNextButton}>
                        <lightning-button variant="brand"  label={label.Next} onclick={handleNext} class="slds-m-right_small" disabled={disableNextButton}></lightning-button>
                    </template>
                </template>
            </template>
            <template if:true={showScreenSix}>
                <template if:false={notBookedViaWebsite}>
                    <lightning-button variant="brand"  label={label.BookAnAppointment} disabled={disableButtons} onclick={handleSubmit} class="slds-m-right_small"></lightning-button>
                </template>
            </template>    
        </div>
        <template if:true={notBookedViaWebsite}>
            <div class="slds-align_absolute-center">
                <template if:false={showScreenSix}>
                    <lightning-button variant="brand"  label={label.Next} onclick={handleNext}></lightning-button>
                </template>
                <template if:true={showScreenSix}>
                    <button class="slds-m-horizontal_xx-small slds-button slds-button_outline-brand customButton" onclick={handleAppointmentEdit}>{label.EditAppointment}</button>
                    <button class="slds-m-horizontal_xx-small slds-button slds-button_text-destructive customButton" onclick={handleCancellation}>{label.CancelAppointment}</button>
                    <template if:true={showChangeButton}>
                        <button class="slds-m-horizontal_xx-small slds-button slds-button_brand customButton" onclick={handleAppointmentUpdate}>{label.ConfirmChange}</button>
                    </template>
                </template>
            </div>
        </template>
    </footer>
</template>
    
        <!-- </lightning-card> -->
        
    </div>



    <template if:true={showModal}>
        <c-success-modal 
        response={response}
        service-appointment-number={serviceAppointmentNumber}
        double-booked={doubleBooked}
        onclose={handleModalClose}
        ></c-success-modal>
      </template>

    <template if:true={showCancelModal}>
        <c-cancel-modal 
        onappointmentcancellation={handleAppointmentCancellation}
        onclose={handleModalClose}
        ></c-cancel-modal>
      </template>

      <template if:true={showSpinner}>
        <div class="modal-backdrop">
            <lightning-spinner alternative-text="Loading" variant="brand" size="large"></lightning-spinner>
           </div>
       </template> 

      <template if:true={showGetInfoSpinner}>
        <div class="modal-backdropAllWhite">
            <lightning-spinner alternative-text="Loading" variant="brand" size="large"></lightning-spinner>
           </div>
       </template> 
</template>